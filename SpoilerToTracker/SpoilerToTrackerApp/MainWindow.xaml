<Window x:Class="SpoilerToTracker.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:WindowChrome="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        Title="OOTMM Spoiler To Tracker"
        Height="600" Width="900"
        Background="#FF212121"
        ResizeMode="CanResize"
        MinHeight="600"
        MinWidth="900"
        AllowDrop="True">

    <!-- Custom chrome setup -->
    <WindowChrome.WindowChrome>
        <WindowChrome:WindowChrome
            CaptionHeight="0"
            CornerRadius="0"
            GlassFrameThickness="0"
            UseAeroCaptionButtons="False" />
    </WindowChrome.WindowChrome>

    <Window.Resources>
        <BitmapImage x:Key="Check" UriSource="Images/Check.png" />
        <BitmapImage x:Key="Search" UriSource="Images/Search.png" />
        <BitmapImage x:Key="Cross" UriSource="Images/Cross.png" />
        <BitmapImage x:Key="Saved" UriSource="Images/Saved.png" />
    </Window.Resources>

    <!-- Border around entire window -->
    <Border BorderBrush="#FF444444" BorderThickness="1">
        <Grid>
            <!-- Custom Title Bar -->
            <Grid x:Name="TitleBar"
                  Height="32"
                  VerticalAlignment="Top"
                  MouseDown="TitleBar_MouseDown">

                <!-- Gradient background -->
                <Grid.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <!-- top highlight -->
                        <GradientStop Color="#FF3E3E3E" Offset="0.0"/>
                        <!-- main color -->
                        <GradientStop Color="#FF333333" Offset="0.4"/>
                        <!-- bottom shadow -->
                        <GradientStop Color="#FF2A2A2A" Offset="1.0"/>
                    </LinearGradientBrush>
                </Grid.Background>

                <!-- Optional top highlight line -->
                <Border Background="#33FFFFFF" Height="1" VerticalAlignment="Top"/>

                <!-- Optional bottom shadow line -->
                <Border Background="#33000000" Height="1" VerticalAlignment="Bottom"/>

                <!-- Title and Buttons -->
                <Grid>
                    <TextBlock Text="OOTMM Spoiler To Tracker"
                               VerticalAlignment="Center"
                               Margin="10,0,0,0"
                               Foreground="White"
                               FontWeight="Bold"/>

                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Right">
                        <Button Content="─"
                                Width="40" Height="32"
                                Background="Transparent"
                                Foreground="White"
                                BorderBrush="{x:Null}"
                                Click="Minimize_Click"/>

                        <Button Content="☐"
                                Width="40" Height="32"
                                Background="Transparent"
                                Foreground="White"
                                BorderBrush="{x:Null}"
                                Click="Maximize_Click"/>

                        <Button Content="✕"
                                Width="40" Height="32"
                                Background="Transparent"
                                Foreground="White"
                                BorderBrush="{x:Null}"
                                Click="Close_Click"/>
                    </StackPanel>
                </Grid>
            </Grid>

            <!-- Main content below the title bar -->
            <Grid Margin="0,36,0,0"
                  AllowDrop="True"
                  Drop="MainGrid_Drop"
                  DragOver="MainGrid_DragOver">

                <!-- Modern Flat Tabs -->
                <TabControl Background="#FF1E1E1E"
                            Foreground="White"
                            BorderThickness="0"
                            Margin="10"
                            AllowDrop="True"
                            Drop="MainGrid_Drop"
                            DragOver="MainGrid_DragOver">

                    <!-- Tab Header Style -->
                    <TabControl.Resources>
                        <Style TargetType="TabItem">
                            <Setter Property="Foreground" Value="#FFCCCCCC"/>
                            <Setter Property="Background" Value="Transparent"/>
                            <Setter Property="Padding" Value="12,6"/>
                            <Setter Property="FontWeight" Value="SemiBold"/>
                            <Setter Property="BorderThickness" Value="0"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="TabItem">
                                        <Border Background="{TemplateBinding Background}"
                                                CornerRadius="4"
                                                Margin="2"
                                                Padding="{TemplateBinding Padding}">
                                            <ContentPresenter ContentSource="Header"
                                                              VerticalAlignment="Center"
                                                              HorizontalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="Background" Value="#FF8B5CF6"/>
                                                <Setter Property="Foreground" Value="White"/>
                                            </Trigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="#FF8B5CF6"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </TabControl.Resources>

                    <!-- TAB 1 -->
                    <TabItem Header="Convert To Emotracker">
                        <Grid Background="#FF252525" Margin="10" >
                            <Grid.RowDefinitions>
                                <RowDefinition Height="350" />
                                <!-- fixed height for image area -->
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <!-- Top blank area for images -->
                            <Border Grid.Row="0" Background="#FF1E1E1E" BorderBrush="#FF8B5CF6" BorderThickness="2" CornerRadius="6" Margin="0,0,0,10">
                                <!-- Placeholder content -->
                                <Image x:Name="StatusImage" Source="/Images/Search.png" Margin="0,0,0,0"/>
                            </Border>

                            <!-- Middle section: Browse button + text block -->
                            <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,10" VerticalAlignment="Center">
                                <Button x:Name="BrowseButton" Width="100" Height="50" Content="Browse" Click="BrowseButton_Click" Margin="2,0,0,0"/>
                                <TextBlock x:Name="FilePathTextBox" Text="No file selected" Foreground="#FFD0D0D0" VerticalAlignment="Center" Margin="10,0,0,0" />
                            </StackPanel>



                            <!-- Bottom section: Centered Convert button -->
                            <StackPanel Grid.Row="2" Orientation="Horizontal" >

                                <Button x:Name="ConvertButton" Content="Convert"
                                        Width="160" Height="50"
                                        IsEnabled="False"
                                        HorizontalAlignment="Left"
                                        Margin="2,0,0,5"
                                        FontWeight="Bold" Click="ConvertButton_Click"
                                        >
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Background" Value="#FF8B5CF6"/>
                                            <Setter Property="Foreground" Value="White"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                            <Setter Property="BorderBrush" Value="Transparent"/>
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border Background="{TemplateBinding Background}"
                                                                CornerRadius="4"
                                                                BorderThickness="0"
                                                                Padding="6,2">
                                                            <ContentPresenter HorizontalAlignment="Center"
                                                                              VerticalAlignment="Center"
                                                                              RecognizesAccessKey="True"/>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <!-- Hover -->
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter Property="Background" Value="#FF9B7CF8"/>
                                                            </Trigger>

                                                            <!-- Pressed -->
                                                            <Trigger Property="IsPressed" Value="True">
                                                                <Setter Property="Background" Value="#FF6F42F1"/>
                                                            </Trigger>

                                                            <!-- Disabled -->
                                                            <Trigger Property="IsEnabled" Value="False">
                                                                <Setter Property="Background" Value="#FF1E1E1E"/>
                                                                <!-- your dark background -->
                                                                <Setter Property="Foreground" Value="#FF555555"/>
                                                                <!-- dimmed gray text -->
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>

                                <Button x:Name="ResetButton" Content="Reset"
                                                 Width="160" Height="50"
                                                 IsEnabled="False"
                                                 HorizontalAlignment="Right"
                                                 Margin="10,0,0,5"
                                                 FontWeight="Bold" Click="ResetButton_Click"
         >
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Background" Value="#FF8B5CF6"/>
                                            <Setter Property="Foreground" Value="White"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                            <Setter Property="BorderBrush" Value="Transparent"/>
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border Background="{TemplateBinding Background}"
                                 CornerRadius="4"
                                 BorderThickness="0"
                                 Padding="6,2">
                                                            <ContentPresenter HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               RecognizesAccessKey="True"/>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <!-- Hover -->
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter Property="Background" Value="#FF9B7CF8"/>
                                                            </Trigger>

                                                            <!-- Pressed -->
                                                            <Trigger Property="IsPressed" Value="True">
                                                                <Setter Property="Background" Value="#FF6F42F1"/>
                                                            </Trigger>

                                                            <!-- Disabled -->
                                                            <Trigger Property="IsEnabled" Value="False">
                                                                <Setter Property="Background" Value="#FF1E1E1E"/>
                                                                <!-- your dark background -->
                                                                <Setter Property="Foreground" Value="#FF555555"/>
                                                                <!-- dimmed gray text -->
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>

                            </StackPanel>

                        </Grid>
                    </TabItem>


                    <!-- TAB 2 -->
                    <TabItem Header="View Spoiler Details">
                        <Grid Background="#FF252525" Margin="10">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <!-- Dropdown -->
                                <RowDefinition Height="*"/>
                                <!-- DataGrid -->
                            </Grid.RowDefinitions>

                            <!-- DARK ComboBox -->
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                <TextBlock Text="Category:"
                                           Foreground="#FFD0D0D0"
                                           VerticalAlignment="Center"
                                           Margin="0,0,10,0"
                                           FontWeight="SemiBold"/>
                                <ComboBox x:Name="CategoryComboBox"
                                              Width="170"
                                              Foreground="White"
                                              Background="#FF1E1E1E"
                                              BorderBrush="#FF8B5CF6"
                                              BorderThickness="1"
                                              Padding="4,2"
                                              SelectedIndex="0" 
                                              IsEnabled="False"
                                              SelectionChanged="CategoryComboBox_SelectionChanged">

                                    <ComboBox.Template>
                                        <ControlTemplate TargetType="ComboBox">
                                            <Grid>
                                                <!-- Main background -->
                                                <Border x:Name="Background"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="3" />

                                                <!-- Text display -->
                                                <TextBlock x:Name="TextContent"
                           Text="{TemplateBinding SelectionBoxItem}"
                           Margin="6,2,30,2"
                           VerticalAlignment="Center"
                           Foreground="{TemplateBinding Foreground}" />

                                                <!-- Drop-down arrow -->
                                                <ToggleButton x:Name="DropDownButton"
                              Grid.Column="2"
                              Focusable="False"
                              IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                              ClickMode="Press"
                              Background="#FF2A2A2A"
                              BorderBrush="#FF8B5CF6"
                              BorderThickness="0"
                              HorizontalAlignment="Right"
                              Width="24"
                              Margin="0">
                                                    <Path x:Name="PART_Arrow"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center"
                          Data="M 0 0 L 4 4 L 8 0 Z"
                          Fill="White"/>
                                                </ToggleButton>

                                                <!-- Popup dropdown -->
                                                <Popup x:Name="Popup"
                       Placement="Bottom"
                       AllowsTransparency="True"
                       Focusable="False"
                       IsOpen="{TemplateBinding IsDropDownOpen}"
                       PopupAnimation="Slide">
                                                    <Border Background="#FF1E1E1E"
                            BorderBrush="#FF8B5CF6"
                            BorderThickness="1"
                            CornerRadius="3"
                            SnapsToDevicePixels="True">
                                                        <ScrollViewer>
                                                            <ItemsPresenter />
                                                        </ScrollViewer>
                                                    </Border>
                                                </Popup>
                                            </Grid>

                                            <!-- Control triggers -->
                                            <ControlTemplate.Triggers>
                                                <!-- Hover effect -->
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="Background" Property="BorderBrush" Value="#FF8B5CF6"/>
                                                </Trigger>

                                                <!-- Disabled state -->
                                                <Trigger Property="IsEnabled" Value="False">
                                                    <Setter TargetName="Background" Property="Background" Value="#FF1E1E1E"/>
                                                    <Setter TargetName="Background" Property="BorderBrush" Value="#FF3A3A3A"/>
                                                    <Setter TargetName="DropDownButton" Property="Background" Value="#FF2A2A2A"/>
                                                    <Setter TargetName="DropDownButton" Property="BorderBrush" Value="#FF3A3A3A"/>
                                                    <Setter TargetName="DropDownButton" Property="IsHitTestVisible" Value="False"/>
                                                    <Setter TargetName="TextContent" Property="Foreground" Value="Gray"/>
                                                    <Setter TargetName="PART_Arrow" Property="Fill" Value="Gray"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </ComboBox.Template>

                                    <!-- Dropdown item styles -->
                                    <ComboBox.Resources>
                                        <Style TargetType="ComboBoxItem">
                                            <Setter Property="Background" Value="#FF1E1E1E"/>
                                            <Setter Property="Foreground" Value="White"/>
                                            <Setter Property="Padding" Value="4,2"/>
                                            <Setter Property="HorizontalContentAlignment" Value="Left"/>

                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="#FF8B5CF6"/>
                                                    <Setter Property="Foreground" Value="White"/>
                                                </Trigger>
                                                <Trigger Property="IsSelected" Value="True">
                                                    <Setter Property="Background" Value="#FF6A5ACD"/>
                                                    <Setter Property="Foreground" Value="White"/>
                                                </Trigger>
                                                <Trigger Property="IsEnabled" Value="False">
                                                    <Setter Property="Foreground" Value="Gray"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </ComboBox.Resources>

                                    <!-- Items -->
                                    <ComboBoxItem IsEnabled="False"
                  FontWeight="Bold"
                  Foreground="#FF8B5CF6"
                  Content="---------- Settings ----------"/>
                                    <ComboBoxItem x:Name ="seedInfoBox" Content="Seed Info" />
                                    <ComboBoxItem x:Name ="gameSettingsBox" Content="Game Settings" />
                                    <ComboBoxItem x:Name ="startingItemsBox" Content="Starting Items"/>
                                    <ComboBoxItem x:Name ="dungeonRewards" Content="Dungeon Rewards" />
                                    <ComboBoxItem x:Name ="plandoBox" Content="Plandos"/>
                                    <ComboBoxItem x:Name ="conditionsBox" Content="Conditions" />
                                    <ComboBoxItem x:Name ="worldFlagsBox" Content="World Flags" />
                                    <ComboBoxItem x:Name ="preCompletedDungeonsBox" Content="Pre-Completed Dungeons" />
                                    <ComboBoxItem x:Name ="junkLocationsBox" Content="Junk Locations"/>
                                    <ComboBoxItem x:Name ="tricksBox" Content="Tricks" />
                                    <ComboBoxItem x:Name ="glitchesBox" Content="Glitches" />
                                    <ComboBoxItem x:Name ="entrancesBox" Content="Entrances" />

                                    <ComboBoxItem IsEnabled="False"
                  FontWeight="Bold"
                  Content="---------- Hints ----------"/>
                                    <ComboBoxItem x:Name ="pathsBox" Content="Paths"/>
                                    <ComboBoxItem x:Name ="regionalHintsBox" Content="Regional Hints" />
                                    <ComboBoxItem x:Name ="wayOfTheHeroHintsBox" Content="Way of the Hero Hints" />
                                    <ComboBoxItem x:Name ="foolishHintsBox" Content="Foolish Hints" />
                                    <ComboBoxItem x:Name ="specificHintsBox" Content="Specific Hints" />

                                    <ComboBoxItem IsEnabled="False"
                  FontWeight="Bold"
                  Content="--------- Extras ----------"/>
                                    <ComboBoxItem x:Name ="wayOfTheHeroPathBox" Content="Way of the Hero Paths" />
                                    <ComboBoxItem x:Name ="spheresBox" Content="Spheres" />
                                    <ComboBoxItem x:Name ="itemLocationsBox" Content="Item Locations" />
                                </ComboBox>

                                <TextBox x:Name="SearchTextBox"
                                         Width="400"
                                         Height="26"
                                         VerticalAlignment="Center"
                                         Foreground="DimGray"
                                         Background="#FF1E1E1E"
                                         BorderBrush="#FF8B5CF6"
                                         BorderThickness="1"
                                         Padding="4,2"
                                         Margin="10,0,15,0"
                                         Text="Search..." 
                                         IsEnabled="False"
                                         GotFocus="SearchTextBox_GotFocus" 
                                         LostFocus="SearchTextBox_LostFocus"
                                         TextChanged="SearchTextBox_TextChanged"
                                         />
                            </StackPanel>

                            <!-- Styled DataGrid -->
                            <DataGrid x:Name="SpoilerDataGrid"
                                      Grid.Row="1"
                                      Background="#FF212121"
                                      Foreground="White"
                                      BorderBrush="#FF5E5E5E"
                                      HeadersVisibility="Column"
                                      AutoGenerateColumns="False"
                                      IsReadOnly="True"
                                      SelectionMode="Extended"
                                      SelectionUnit="FullRow"
                                      CanUserResizeColumns="True"
                                      CanUserSortColumns="True"
                                      GridLinesVisibility="Horizontal"
                                      HorizontalGridLinesBrush="#FF5E5E5E"
                                      VerticalGridLinesBrush="#FF5E5E5E"
                                      AlternationCount="2"
                                      Margin="0">

                                <!-- Row Styling -->
                                <DataGrid.RowStyle>
                                    <Style TargetType="DataGridRow">
                                        <Setter Property="SnapsToDevicePixels" Value="True"/>
                                        <Setter Property="Background" Value="#FF212121"/>
                                        <Setter Property="Foreground" Value="White"/>
                                        <Style.Triggers>
                                            <Trigger Property="AlternationIndex" Value="1">
                                                <Setter Property="Background" Value="#FF2E2E2E"/>
                                            </Trigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="#FF8B5CF6"/>
                                                <Setter Property="Foreground" Value="White"/>
                                            </Trigger>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="Background" Value="#FF8B5CF6"/>
                                                <Setter Property="Foreground" Value="White"/>
                                            </Trigger>
                                            <MultiTrigger>
                                                <MultiTrigger.Conditions>
                                                    <Condition Property="IsSelected" Value="True"/>
                                                    <Condition Property="IsMouseOver" Value="True"/>
                                                </MultiTrigger.Conditions>
                                                <Setter Property="Background" Value="#FF9B7CF8"/>
                                            </MultiTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DataGrid.RowStyle>

                                <!-- Column Header Styling -->
                                <DataGrid.ColumnHeaderStyle>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="Background" Value="#FF212121"/>
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="BorderBrush" Value="#FF5E5E5E"/>
                                        <Setter Property="BorderThickness" Value="0,0,1,1"/>
                                        <Setter Property="HorizontalContentAlignment" Value="Left"/>
                                        <Setter Property="Padding" Value="4,2"/>
                                        <Setter Property="FontWeight" Value="Bold"/>
                                    </Style>
                                </DataGrid.ColumnHeaderStyle>

                                <!-- Cell Styling -->
                                <DataGrid.CellStyle>
                                    <Style TargetType="DataGridCell">
                                        <Setter Property="Foreground" Value="White"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter Property="Background" Value="Transparent"/>
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                                <Setter Property="Foreground"
                                    Value="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=Foreground}"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </DataGrid.CellStyle>


                            </DataGrid>
                        </Grid>
                    </TabItem>




                </TabControl>
            </Grid>
        </Grid>
    </Border>
</Window>
